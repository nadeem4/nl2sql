
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Production-grade Natural Language to SQL Platform Documentation">
      
      
        <meta name="author" content="Platform Engineering">
      
      
      
        <link rel="prev" href="../determinism/">
      
      
        <link rel="next" href="../failure_recovery/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Invariants - NL2SQL Platform</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architectural-invariants" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="NL2SQL Platform" class="md-header__button md-logo" aria-label="NL2SQL Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NL2SQL Platform
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Invariants
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting_started/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../configuration/system/" class="md-tabs__link">
          
  
  
  Configuration

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../adapters/" class="md-tabs__link">
          
  
  
  Adapters

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../schema/store/" class="md-tabs__link">
          
  
  
  Schema

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../execution/sandbox/" class="md-tabs__link">
          
  
  
  Execution

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../storage/artifact-store/" class="md-tabs__link">
          
  
  
  Storage

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../observability/stack/" class="md-tabs__link">
          
  
  
  Observability

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../security/model/" class="md-tabs__link">
          
  
  
  Security

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/architecture/" class="md-tabs__link">
          
  
  
  Deployment

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../testing/architecture/" class="md-tabs__link">
          
  
  
  Testing

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/" class="md-tabs__link">
          
  
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../glossary/" class="md-tabs__link">
        
  
  
    
  
  Glossary

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="NL2SQL Platform" class="md-nav__button md-logo" aria-label="NL2SQL Platform" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    NL2SQL Platform
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph_state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Graph State
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../determinism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Determinism
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Invariants
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Invariants
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#semantic-only-subqueries-and-post-combine-ops" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic-Only Subqueries and Post-Combine Ops
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Semantic-Only Subqueries and Post-Combine Ops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine-groups-require-roles-and-join-keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combine Groups Require Roles and Join Keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Combine Groups Require Roles and Join Keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decomposer-references-must-resolve" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decomposer References Must Resolve
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decomposer References Must Resolve">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expression-ast-must-match-its-kind" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expression AST Must Match Its Kind
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expression AST Must Match Its Kind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plan-model-is-strict-and-read-only" class="md-nav__link">
    <span class="md-ellipsis">
      
        Plan Model Is Strict and Read-Only
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plan Model Is Strict and Read-Only">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plan-ordinals-are-contiguous" class="md-nav__link">
    <span class="md-ellipsis">
      
        Plan Ordinals Are Contiguous
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plan Ordinals Are Contiguous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-aliases-are-unique" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table Aliases Are Unique
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Aliases Are Unique">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expected-schema-must-match-select-list" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expected Schema Must Match Select List
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expected Schema Must Match Select List">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#column-references-must-resolve" class="md-nav__link">
    <span class="md-ellipsis">
      
        Column References Must Resolve
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Column References Must Resolve">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joins-must-be-valid-and-schema-backed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Joins Must Be Valid and Schema-Backed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Joins Must Be Valid and Schema-Backed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policy-enforcement-is-namespaced-and-fail-closed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Policy Enforcement Is Namespaced and Fail-Closed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Policy Enforcement Is Namespaced and Fail-Closed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datasource-access-is-rbac-gated" class="md-nav__link">
    <span class="md-ellipsis">
      
        Datasource Access Is RBAC-Gated
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Datasource Access Is RBAC-Gated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-execution-requires-sql-datasource-and-capability" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL Execution Requires SQL, Datasource, and Capability
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Execution Requires SQL, Datasource, and Capability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-dag-must-be-valid-and-acyclic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Execution DAG Must Be Valid and Acyclic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Execution DAG Must Be Valid and Acyclic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relation-schemas-have-unique-column-names" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relation Schemas Have Unique Column Names
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Relation Schemas Have Unique Column Names">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregation-requires-scan-artifacts-and-single-input-post-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aggregation Requires Scan Artifacts and Single-Input Post Nodes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aggregation Requires Scan Artifacts and Single-Input Post Nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-requires-vector-store-and-schema-store-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context Requires Vector Store and Schema Store Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Requires Vector Store and Schema Store Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-generation-enforces-a-row-limit-cap" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL Generation Enforces a Row Limit Cap
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Generation Enforces a Row Limit Cap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipeline-execution-is-time-bounded" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pipeline Execution Is Time-Bounded
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pipeline Execution Is Time-Bounded">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Categories
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gaps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gaps
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Code
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../failure_recovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Failure + Recovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexing + Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Subgraphs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Subgraphs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../subgraphs/main_pipeline_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Main Pipeline Graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../subgraphs/sql_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQL Agent Subgraph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Nodes
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Nodes
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node Catalog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/answer_synthesizer_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Answer Synthesizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/ast_planner_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AST Planner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/datasource_resolver_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datasource Resolver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/decomposer_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Decomposer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/engine_aggregator_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engine Aggregator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/executor_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Executor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/generator_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/global_planner_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Global Planner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/logical_validator_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Logical Validator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/physical_validator_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Physical Validator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/refiner_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Refiner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nodes/schema_retriever_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Retriever
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/pypi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PyPI (Python API)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker (REST API)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    From Source (Development)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/datasources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datasources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/llm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLMs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/policies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Policies
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/secrets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Secrets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Adapters
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Adapters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/sdk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SDK Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/sqlalchemy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQLAlchemy Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building Adapters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/mssql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Microsoft SQL Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MySQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/postgres/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adapters/sqlite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SQLite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Schema
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Schema
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schema/store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Store + Metadata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Execution
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Execution
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../execution/sandbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Execution Sandbox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Storage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../storage/artifact-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Artifact Store
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Observability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Observability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/stack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Observability Stack
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/error-handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Handling + Circuit Breakers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security Model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/multi-tenant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Tenant Isolation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/kubernetes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extending NL2SQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/add-adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/add-chunk-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add Chunk Types
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/extend-planner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Extend Planner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/add-execution-backend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add Execution Backend
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_14_2" >
        
          
          <label class="md-nav__link" for="__nav_14_2" id="__nav_14_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Core API (Python)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_14_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core API (Python)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/public-facade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Public Facade
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Auth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/datasource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datasource
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/llm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/indexing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/result/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Result
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_14_3" >
        
          
          <label class="md-nav__link" for="__nav_14_3" id="__nav_14_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    REST API (FastAPI)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_14_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    REST API (FastAPI)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest/health/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Health
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest/query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest/datasource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Datasource
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest/llm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest/indexing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#semantic-only-subqueries-and-post-combine-ops" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic-Only Subqueries and Post-Combine Ops
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Semantic-Only Subqueries and Post-Combine Ops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combine-groups-require-roles-and-join-keys" class="md-nav__link">
    <span class="md-ellipsis">
      
        Combine Groups Require Roles and Join Keys
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Combine Groups Require Roles and Join Keys">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decomposer-references-must-resolve" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decomposer References Must Resolve
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decomposer References Must Resolve">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expression-ast-must-match-its-kind" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expression AST Must Match Its Kind
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expression AST Must Match Its Kind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plan-model-is-strict-and-read-only" class="md-nav__link">
    <span class="md-ellipsis">
      
        Plan Model Is Strict and Read-Only
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plan Model Is Strict and Read-Only">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plan-ordinals-are-contiguous" class="md-nav__link">
    <span class="md-ellipsis">
      
        Plan Ordinals Are Contiguous
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plan Ordinals Are Contiguous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-aliases-are-unique" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table Aliases Are Unique
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Aliases Are Unique">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expected-schema-must-match-select-list" class="md-nav__link">
    <span class="md-ellipsis">
      
        Expected Schema Must Match Select List
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Expected Schema Must Match Select List">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#column-references-must-resolve" class="md-nav__link">
    <span class="md-ellipsis">
      
        Column References Must Resolve
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Column References Must Resolve">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joins-must-be-valid-and-schema-backed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Joins Must Be Valid and Schema-Backed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Joins Must Be Valid and Schema-Backed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#policy-enforcement-is-namespaced-and-fail-closed" class="md-nav__link">
    <span class="md-ellipsis">
      
        Policy Enforcement Is Namespaced and Fail-Closed
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Policy Enforcement Is Namespaced and Fail-Closed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#datasource-access-is-rbac-gated" class="md-nav__link">
    <span class="md-ellipsis">
      
        Datasource Access Is RBAC-Gated
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Datasource Access Is RBAC-Gated">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-execution-requires-sql-datasource-and-capability" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL Execution Requires SQL, Datasource, and Capability
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Execution Requires SQL, Datasource, and Capability">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-dag-must-be-valid-and-acyclic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Execution DAG Must Be Valid and Acyclic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Execution DAG Must Be Valid and Acyclic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relation-schemas-have-unique-column-names" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relation Schemas Have Unique Column Names
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Relation Schemas Have Unique Column Names">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregation-requires-scan-artifacts-and-single-input-post-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Aggregation Requires Scan Artifacts and Single-Input Post Nodes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aggregation Requires Scan Artifacts and Single-Input Post Nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-requires-vector-store-and-schema-store-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context Requires Vector Store and Schema Store Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Requires Vector Store and Schema Store Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-generation-enforces-a-row-limit-cap" class="md-nav__link">
    <span class="md-ellipsis">
      
        SQL Generation Enforces a Row Limit Cap
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Generation Enforces a Row Limit Cap">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipeline-execution-is-time-bounded" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pipeline Execution Is Time-Bounded
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pipeline Execution Is Time-Bounded">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Definition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement-points_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforcement Points
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-behavior_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Failure Behavior
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-it-exists_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why It Exists
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Categories
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gaps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gaps
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Code
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="architectural-invariants">Architectural Invariants</h1>
<h2 id="overview">Overview</h2>
<p>These invariants capture rules that are enforced by the code paths responsible for planning, validation, and execution. They exist to keep the system deterministic, secure, and stable under malformed input or misconfiguration.</p>
<hr />
<h2 id="semantic-only-subqueries-and-post-combine-ops">Semantic-Only Subqueries and Post-Combine Ops</h2>
<h3 id="definition">Definition</h3>
<p>Sub-query intents and post-combine operations must not contain SQL tokens or physical schema keywords.</p>
<h3 id="enforcement-points">Enforcement Points</h3>
<ul>
<li><code>SubQuery.validate_semantic_only()</code> in <code>nl2sql.pipeline.nodes.decomposer.schemas</code></li>
<li><code>PostCombineOp.validate_semantic_only()</code> in <code>nl2sql.pipeline.nodes.decomposer.schemas</code></li>
</ul>
<h3 id="failure-behavior">Failure Behavior</h3>
<p>Raises <code>ValueError</code> on any forbidden token detection.</p>
<h3 id="why-it-exists">Why It Exists</h3>
<p>Prevents physical SQL leakage into semantic planning stages and keeps decomposer output safe to interpret downstream.</p>
<hr />
<h2 id="combine-groups-require-roles-and-join-keys">Combine Groups Require Roles and Join Keys</h2>
<h3 id="definition_1">Definition</h3>
<p>Combine groups with <code>compare</code> or <code>join</code> operations must include a role for every input and at least one join key pair.</p>
<h3 id="enforcement-points_1">Enforcement Points</h3>
<ul>
<li><code>CombineGroup.validate_roles()</code> in <code>nl2sql.pipeline.nodes.decomposer.schemas</code></li>
</ul>
<h3 id="failure-behavior_1">Failure Behavior</h3>
<p>Raises <code>ValueError</code> when roles or join keys are missing.</p>
<h3 id="why-it-exists_1">Why It Exists</h3>
<p>Ensures combine operations are well-defined and deterministic for aggregation.</p>
<hr />
<h2 id="decomposer-references-must-resolve">Decomposer References Must Resolve</h2>
<h3 id="definition_2">Definition</h3>
<p>Combine-group inputs must reference existing subqueries, and post-combine ops must reference existing combine groups.</p>
<h3 id="enforcement-points_2">Enforcement Points</h3>
<ul>
<li><code>DecomposerResponse.validate_references()</code> in <code>nl2sql.pipeline.nodes.decomposer.schemas</code></li>
</ul>
<h3 id="failure-behavior_2">Failure Behavior</h3>
<p>Raises <code>ValueError</code> for unknown subquery or group references.</p>
<h3 id="why-it-exists_2">Why It Exists</h3>
<p>Prevents invalid execution graphs and dangling references.</p>
<hr />
<h2 id="expression-ast-must-match-its-kind">Expression AST Must Match Its Kind</h2>
<h3 id="definition_3">Definition</h3>
<p>Expression nodes must satisfy kind-specific required fields (e.g., binary ops require left/right and an operator).</p>
<h3 id="enforcement-points_3">Enforcement Points</h3>
<ul>
<li><code>Expr.model_post_init()</code> in <code>nl2sql.pipeline.nodes.ast_planner.schemas</code></li>
</ul>
<h3 id="failure-behavior_3">Failure Behavior</h3>
<p>Raises <code>ValueError</code> when required fields are missing or operators are invalid.</p>
<h3 id="why-it-exists_3">Why It Exists</h3>
<p>Guarantees the AST is structurally complete before SQL generation.</p>
<hr />
<h2 id="plan-model-is-strict-and-read-only">Plan Model Is Strict and Read-Only</h2>
<h3 id="definition_4">Definition</h3>
<p>Plan fields are schema-validated with no unknown fields, and query type must be <code>READ</code>.</p>
<h3 id="enforcement-points_4">Enforcement Points</h3>
<ul>
<li><code>ConfigDict(extra="forbid")</code> on plan models in <code>nl2sql.pipeline.nodes.ast_planner.schemas</code></li>
<li><code>PlanModel.query_type</code> literal and <code>LogicalValidatorNode._validate_static()</code> in <code>nl2sql.pipeline.nodes.validator.node</code></li>
</ul>
<h3 id="failure-behavior_4">Failure Behavior</h3>
<p>Pydantic validation errors for extra/invalid fields; <code>PipelineError</code> with <code>SECURITY_VIOLATION</code> for non-READ queries.</p>
<h3 id="why-it-exists_4">Why It Exists</h3>
<p>Prevents mutation or unknown plan constructs from entering execution.</p>
<hr />
<h2 id="plan-ordinals-are-contiguous">Plan Ordinals Are Contiguous</h2>
<h3 id="definition_5">Definition</h3>
<p>Ordinal fields for tables, joins, select items, group-by, and order-by must be contiguous starting at 0.</p>
<h3 id="enforcement-points_5">Enforcement Points</h3>
<ul>
<li><code>LogicalValidatorNode._validate_ordinals()</code> in <code>nl2sql.pipeline.nodes.validator.node</code></li>
</ul>
<h3 id="failure-behavior_5">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>INVALID_PLAN_STRUCTURE</code>.</p>
<h3 id="why-it-exists_5">Why It Exists</h3>
<p>Ensures deterministic ordering and stable SQL generation.</p>
<hr />
<h2 id="table-aliases-are-unique">Table Aliases Are Unique</h2>
<h3 id="definition_6">Definition</h3>
<p>Each table alias in the plan must be unique.</p>
<h3 id="enforcement-points_6">Enforcement Points</h3>
<ul>
<li><code>LogicalValidatorNode._alias_collision()</code> in <code>nl2sql.pipeline.nodes.validator.node</code></li>
</ul>
<h3 id="failure-behavior_6">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>INVALID_PLAN_STRUCTURE</code>.</p>
<h3 id="why-it-exists_6">Why It Exists</h3>
<p>Prevents ambiguous column resolution.</p>
<hr />
<h2 id="expected-schema-must-match-select-list">Expected Schema Must Match Select List</h2>
<h3 id="definition_7">Definition</h3>
<p>When <code>expected_schema</code> is provided, the plans <code>select_items</code> count and aliases must match it.</p>
<h3 id="enforcement-points_7">Enforcement Points</h3>
<ul>
<li><code>LogicalValidatorNode._validate_static()</code> in <code>nl2sql.pipeline.nodes.validator.node</code></li>
</ul>
<h3 id="failure-behavior_7">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>INVALID_PLAN_STRUCTURE</code>.</p>
<h3 id="why-it-exists_7">Why It Exists</h3>
<p>Keeps multi-stage subqueries contractually aligned.</p>
<hr />
<h2 id="column-references-must-resolve">Column References Must Resolve</h2>
<h3 id="definition_8">Definition</h3>
<p>All column references must map to declared table aliases and be unambiguous.</p>
<h3 id="enforcement-points_8">Enforcement Points</h3>
<ul>
<li><code>ValidatorVisitor</code> in <code>nl2sql.pipeline.nodes.validator.node</code></li>
<li><code>LogicalValidatorNode._validate_static()</code> converts visitor errors to <code>PipelineError</code></li>
</ul>
<h3 id="failure-behavior_8">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>COLUMN_NOT_FOUND</code> (severity depends on <code>logical_validator_strict_columns</code>).</p>
<h3 id="why-it-exists_8">Why It Exists</h3>
<p>Prevents queries from referencing non-existent or ambiguous columns.</p>
<hr />
<h2 id="joins-must-be-valid-and-schema-backed">Joins Must Be Valid and Schema-Backed</h2>
<h3 id="definition_9">Definition</h3>
<p>Join aliases must exist, join conditions must reference both sides, must include an equality pair, and must match allowed schema relationships.</p>
<h3 id="enforcement-points_9">Enforcement Points</h3>
<ul>
<li><code>LogicalValidatorNode._validate_static()</code> join checks in <code>nl2sql.pipeline.nodes.validator.node</code></li>
</ul>
<h3 id="failure-behavior_9">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>INVALID_PLAN_STRUCTURE</code> or <code>JOIN_TABLE_NOT_IN_PLAN</code>.</p>
<h3 id="why-it-exists_9">Why It Exists</h3>
<p>Prevents invalid joins and enforces schema-authorized relationships.</p>
<hr />
<h2 id="policy-enforcement-is-namespaced-and-fail-closed">Policy Enforcement Is Namespaced and Fail-Closed</h2>
<h3 id="definition_10">Definition</h3>
<p>Allowed tables must be namespaced as <code>datasource.table</code> or <code>datasource.*</code>, and policy checks fail if datasource ID is missing.</p>
<h3 id="enforcement-points_10">Enforcement Points</h3>
<ul>
<li><code>RolePolicy.validate_namespace()</code> in <code>nl2sql.security.policies</code></li>
<li><code>LogicalValidatorNode._validate_policy()</code> in <code>nl2sql.pipeline.nodes.validator.node</code></li>
</ul>
<h3 id="failure-behavior_10">Failure Behavior</h3>
<p><code>ValueError</code> for invalid policy format; <code>PipelineError</code> with <code>SECURITY_VIOLATION</code> if datasource ID is missing or a table is not allowed.</p>
<h3 id="why-it-exists_10">Why It Exists</h3>
<p>Ensures access control boundaries are explicit and enforced.</p>
<hr />
<h2 id="datasource-access-is-rbac-gated">Datasource Access Is RBAC-Gated</h2>
<h3 id="definition_11">Definition</h3>
<p>Only datasources permitted by RBAC may be selected or resolved.</p>
<h3 id="enforcement-points_11">Enforcement Points</h3>
<ul>
<li><code>DatasourceResolverNode._get_allowed_datasource_ids()</code> and <code>__call__()</code> in <code>nl2sql.pipeline.nodes.datasource_resolver.node</code></li>
</ul>
<h3 id="failure-behavior_11">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>SECURITY_VIOLATION</code> if no allowed datasource is available.</p>
<h3 id="why-it-exists_11">Why It Exists</h3>
<p>Prevents execution against unauthorized datasources.</p>
<hr />
<h2 id="sql-execution-requires-sql-datasource-and-capability">SQL Execution Requires SQL, Datasource, and Capability</h2>
<h3 id="definition_12">Definition</h3>
<p>Execution only proceeds when SQL text exists, a datasource ID is present, and the datasource supports SQL.</p>
<h3 id="enforcement-points_12">Enforcement Points</h3>
<ul>
<li><code>ExecutorNode.__call__()</code> in <code>nl2sql.pipeline.nodes.executor.node</code></li>
<li><code>SqlExecutorService.validate_request()</code> in <code>nl2sql.execution.executor.sql_executor</code></li>
</ul>
<h3 id="failure-behavior_12">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>MISSING_SQL</code>, <code>MISSING_DATASOURCE_ID</code>, or <code>INVALID_STATE</code>.</p>
<h3 id="why-it-exists_12">Why It Exists</h3>
<p>Prevents invalid execution requests and ensures capability compatibility.</p>
<hr />
<h2 id="execution-dag-must-be-valid-and-acyclic">Execution DAG Must Be Valid and Acyclic</h2>
<h3 id="definition_13">Definition</h3>
<p>Post-combine ops must target known combine groups, all edges must reference existing nodes, and the DAG must be acyclic.</p>
<h3 id="enforcement-points_13">Enforcement Points</h3>
<ul>
<li><code>GlobalPlannerNode.__call__()</code> in <code>nl2sql.pipeline.nodes.global_planner.node</code></li>
<li><code>ExecutionDAG._layered_toposort()</code> in <code>nl2sql.pipeline.nodes.global_planner.schemas</code></li>
</ul>
<h3 id="failure-behavior_13">Failure Behavior</h3>
<p>Raises <code>ValueError</code>, leading to <code>PipelineError</code> with <code>PLANNER_FAILED</code>.</p>
<h3 id="why-it-exists_13">Why It Exists</h3>
<p>Ensures deterministic and well-ordered aggregation execution.</p>
<hr />
<h2 id="relation-schemas-have-unique-column-names">Relation Schemas Have Unique Column Names</h2>
<h3 id="definition_14">Definition</h3>
<p>Each relation schemas column names must be unique.</p>
<h3 id="enforcement-points_14">Enforcement Points</h3>
<ul>
<li><code>RelationSchema.validate_unique_columns()</code> in <code>nl2sql.pipeline.nodes.global_planner.schemas</code></li>
</ul>
<h3 id="failure-behavior_14">Failure Behavior</h3>
<p>Raises <code>ValueError</code> during schema validation.</p>
<h3 id="why-it-exists_14">Why It Exists</h3>
<p>Prevents ambiguous column outputs in execution DAG nodes.</p>
<hr />
<h2 id="aggregation-requires-scan-artifacts-and-single-input-post-nodes">Aggregation Requires Scan Artifacts and Single-Input Post Nodes</h2>
<h3 id="definition_15">Definition</h3>
<p>Scan nodes must have corresponding artifacts, and post-combine nodes must have exactly one input.</p>
<h3 id="enforcement-points_15">Enforcement Points</h3>
<ul>
<li><code>AggregationService.execute()</code> in <code>nl2sql.aggregation.aggregator</code></li>
</ul>
<h3 id="failure-behavior_15">Failure Behavior</h3>
<p>Raises <code>ValueError</code> when artifacts are missing or post nodes have invalid inputs.</p>
<h3 id="why-it-exists_15">Why It Exists</h3>
<p>Guarantees aggregation operates on complete, correctly wired inputs.</p>
<hr />
<h2 id="context-requires-vector-store-and-schema-store-configuration">Context Requires Vector Store and Schema Store Configuration</h2>
<h3 id="definition_16">Definition</h3>
<p>Vector store collection/path and schema store path (for SQLite backend) must be configured.</p>
<h3 id="enforcement-points_16">Enforcement Points</h3>
<ul>
<li><code>NL2SQLContext.__init__()</code> in <code>nl2sql.context</code></li>
<li><code>build_schema_store()</code> in <code>nl2sql.schema.store</code></li>
</ul>
<h3 id="failure-behavior_16">Failure Behavior</h3>
<p>Raises <code>ValueError</code> if required settings are missing.</p>
<h3 id="why-it-exists_16">Why It Exists</h3>
<p>Prevents startup with incomplete indexing and schema storage configuration.</p>
<hr />
<h2 id="sql-generation-enforces-a-row-limit-cap">SQL Generation Enforces a Row Limit Cap</h2>
<h3 id="definition_17">Definition</h3>
<p>Generated SQL must not exceed the datasource adapters row limit.</p>
<h3 id="enforcement-points_17">Enforcement Points</h3>
<ul>
<li><code>GeneratorNode.__call__()</code> in <code>nl2sql.pipeline.nodes.generator.node</code></li>
</ul>
<h3 id="failure-behavior_17">Failure Behavior</h3>
<p>No error; the limit is clamped to the adapters maximum.</p>
<h3 id="why-it-exists_17">Why It Exists</h3>
<p>Protects execution resources and prevents runaway result sizes.</p>
<hr />
<h2 id="pipeline-execution-is-time-bounded">Pipeline Execution Is Time-Bounded</h2>
<h3 id="definition_18">Definition</h3>
<p>Pipeline execution must complete within <code>settings.global_timeout_sec</code>.</p>
<h3 id="enforcement-points_18">Enforcement Points</h3>
<ul>
<li><code>run_with_graph()</code> in <code>nl2sql.pipeline.runtime</code></li>
</ul>
<h3 id="failure-behavior_18">Failure Behavior</h3>
<p>Returns <code>PipelineError</code> with <code>PIPELINE_TIMEOUT</code> and a timeout response message.</p>
<h3 id="why-it-exists_18">Why It Exists</h3>
<p>Ensures latency bounds and prevents hung requests.</p>
<hr />
<h2 id="categories">Categories</h2>
<ul>
<li><strong>State</strong>: Plan Model Is Strict and Read-Only; Relation Schemas Have Unique Column Names; Context Requires Vector Store and Schema Store Configuration</li>
<li><strong>Execution</strong>: SQL Execution Requires SQL, Datasource, and Capability; Execution DAG Must Be Valid and Acyclic; Aggregation Requires Scan Artifacts and Single-Input Post Nodes; Pipeline Execution Is Time-Bounded</li>
<li><strong>Security</strong>: Policy Enforcement Is Namespaced and Fail-Closed; Datasource Access Is RBAC-Gated; Plan Model Is Strict and Read-Only</li>
<li><strong>Determinism</strong>: Plan Ordinals Are Contiguous; Expected Schema Must Match Select List; Joins Must Be Valid and Schema-Backed</li>
<li><strong>Isolation</strong>: SQL Generation Enforces a Row Limit Cap; Context Requires Vector Store and Schema Store Configuration</li>
</ul>
<hr />
<h2 id="gaps">Gaps</h2>
<ul>
<li>Column existence enforcement can degrade to warnings when <code>logical_validator_strict_columns</code> is disabled, so missing columns do not always block execution.</li>
<li>Schema version mismatch handling is policy-driven and may only emit warnings (e.g., <code>schema_version_mismatch_policy=warn</code>), so mismatch is not always enforced as a hard failure.</li>
<li>Semantic-only checks are token based; they block a fixed list of SQL tokens rather than parsing for all possible SQL constructs.</li>
<li>If the vector store is unavailable, datasource resolution can return a response without errors, relying on downstream stages to detect missing candidates.</li>
</ul>
<hr />
<h2 id="related-code">Related Code</h2>
<ul>
<li><code>packages/core/src/nl2sql/pipeline/nodes/decomposer/schemas.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/ast_planner/schemas.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/validator/node.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/datasource_resolver/node.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/generator/node.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/executor/node.py</code></li>
<li><code>packages/core/src/nl2sql/execution/executor/sql_executor.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/global_planner/node.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/nodes/global_planner/schemas.py</code></li>
<li><code>packages/core/src/nl2sql/aggregation/aggregator.py</code></li>
<li><code>packages/core/src/nl2sql/context.py</code></li>
<li><code>packages/core/src/nl2sql/schema/store.py</code></li>
<li><code>packages/core/src/nl2sql/pipeline/runtime.py</code></li>
<li><code>packages/core/src/nl2sql/security/policies.py</code></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "toc.follow", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>